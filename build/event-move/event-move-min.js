YUI.add("event-move",function(e,t){var n=e.Event._GESTURE_MAP,r={start:n.start,end:n.end,move:n.move},i="start",s="move",o="end",u="gesture"+s,a=u+o,f=u+i,l="_msh",c="_mh",h="_meh",p="_dmsh",d="_dmh",v="_dmeh",m="_ms",g="_m",y="minTime",b="minDistance",w="preventDefault",E="button",S="ownerDocument",x="currentTarget",T="target",N="nodeType",C=e.config.win&&"msPointerEnabled"in e.config.win.navigator,k="msTouchActionCount",L="msInitTouchAction",A=function(t,n,r){var i=r?4:3,s=n.length>i?e.merge(n.splice(i,1)[0]):{};return w in s||(s[w]=t.PREVENT_DEFAULT),s},O=function(e,t){return t._extra.root||e.get(N)===9?e:e.get(S)},M=function(t){var n=t.getDOMNode();return t.compareTo(e.config.doc)&&n.documentElement?n.documentElement:!1},_=function(e,t,n){e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY,e[T]=e[T]||t[T],e[x]=e[x]||t[x],e[E]=n&&n[E]||1},D=function(t){var n=M(t)||t.getDOMNode(),r=t.getData(k);C&&(r||(r=0,t.setData(L,n.style.msTouchAction)),n.style.msTouchAction=e.Event._DEFAULT_TOUCH_ACTION,r++,t.setData(k,r))},P=function(e){var t=M(e)||e.getDOMNode(),n=e.getData(k),r=e.getData(L);C&&(n--,e.setData(k,n),n===0&&t.style.msTouchAction!==r&&(t.style.msTouchAction=r))},H=function(e,t){t&&(!t.call||t(e))&&e.preventDefault()},B=e.Event.define;e.Event._DEFAULT_TOUCH_ACTION="none",B(f,{publishConfig:{preventedFn:function(e){var t=e.target.once("click",function(e){e.preventDefault()});setTimeout(function(){t.detach()},100)}},on:function(e,t,n){D(e),t[l]=e.on(r[i],this._onStart,this,e,t,n)},delegate:function(e,t,n,s){var o=this;t[p]=e.delegate(r[i],function(r){o._onStart(r,e,t,n,!0)},s)},detachDelegate:function(e,t,n,r){var i=t[p];i&&(i.detach(),t[p]=null),P(e)},detach:function(e,t,n){var r=t[l];r&&(r.detach(),t[l]=null),P(e)},processArgs:function(e,t){var n=A(this,e,t);return y in n||(n[y]=this.MIN_TIME),b in n||(n[b]=this.MIN_DISTANCE),n},_onStart:function(t,n,i,u,a){a&&(n=t[x]);var f=i._extra,l=!0,c=f[y],h=f[b],p=f.button,d=f[w],v=O(n,i),m;t.touches?t.touches.length===1?(_(t,t.touches[0],f),i.preventMouse=!0):l=!1:(i.preventMouse=!1,l=p===undefined||p===t.button),m=[t.pageX,t.pageY],l&&(H(t,d),c===0&&h===0?this._start(t,n,i,u,f):c===0&&h>0?(f._hm=v.on(r[s],e.bind(function(e){f._hm&&e.touches&&e.touches.length===1&&_(e,e.touches[0],f),(Math.abs(e.pageX-m[0])>h||Math.abs(e.pageY-m[1])>h)&&f._hm&&this._start(t,n,i,u,f)},this)),f._hme=v.once(r[o],e.bind(function(){this._cancel(f)},this))):c>0&&h===0?(f._ht=e.later(c,this,this._start,[t,n,i,u,f]),f._hme=v.once(r[o],e.bind(function(){this._cancel(f)},this))):c>0&&h>0&&(f._hm=v.on(r[s],e.bind(function(r){f._hm&&r.touches&&r.touches.length===1&&_(r,r.touches[0],f),(Math.abs(r.pageX-m[0])>h||Math.abs(r.pageY-m[1])>h)&&f._hm&&(f._ht||(f._ht=e.later(c,this,this._start,[t,n,i,u,f])))},this)),f._hme=v.once(r[o],e.bind(function(){this._cancel(f)},this))))},_cancel:function(e){e._ht&&(e._ht.cancel(),e._ht=null),e._hme&&(e._hme.detach(),e._hme=null),e._hm&&(e._hm.detach(),e._hm=null)},_start:function(e,t,n,r,i){i&&this._cancel(i);if(e.touches||e.type.indexOf("mouse")!==-1&&!n.preventMouse||e.type.indexOf("MSPointer")!==-1||e._event.type.indexOf("mouse")!==-1)e.type=f,t.setData(m,e),r.fire(e);e.type.indexOf("mouse")!==-1&&n.preventMouse&&(n.preventMouse=!1)},MIN_TIME:0,MIN_DISTANCE:0,PREVENT_DEFAULT:!1}),B(u,{on:function(e,t,n){D(e);var i=O(e,t,r[s]),o=i.on(r[s],this._onMove,this,e,t,n);t[c]=o},delegate:function(e,t,n,i){var o=this;t[d]=e.delegate(r[s],function(r){o._onMove(r,e,t,n,!0)},i)},detach:function(e,t,n){var r=t[c];r&&(r.detach(),t[c]=null),P(e)},detachDelegate:function(e,t,n,r){var i=t[d];i&&(i.detach(),t[d]=null),P(e)},processArgs:function(e,t){return A(this,e,t)},_onMove:function(e,t,n,r,i){i&&(t=e[x]);var s=n._extra.standAlone||t.getData(m),o=n._extra.preventDefault,u=n.preventMouse||!1;s&&(e.touches&&(e.touches.length===1?(_(e,e.touches[0]),n.preventMouse=!0):s=!1),s&&(H(e,o),e.touches?this._move(e,t,n,r):e.type.indexOf("mouse")!==-1&&!u?this._move(e,t,n,r):e.type.indexOf("mouse")!==-1&&u?n.preventMouse=!1:e.type.indexOf("MSPointer")!==-1&&this._move(e,t,n,r)))},_move:function(e,t,n,r){e.type=u,r.fire(e)},PREVENT_DEFAULT:!1}),B(a,{on:function(e,t,n){D(e);var i=O(e,t),s=i.on(r[o],this._onEnd,this,e,t,n);t[h]=s},delegate:function(e,t,n,i){var s=this;t[v]=e.delegate(r[o],function(r){s._onEnd(r,e,t,n,!0)},i)},detachDelegate:function(e,t,n,r){var i=t[v];i&&(i.detach(),t[v]=null),P(e)},detach:function(e,t,n){var r=t[h];r&&(r.detach(),t[h]=null),P(e)},processArgs:function(e,t){return A(this,e,t)},_onEnd:function(e,t,n,r,i){i&&(t=e[x]);var s=t.getData(m),o=n._extra.standAlone||t.getData(g)||s,u=n._extra.preventDefault,a=n.preventMouse||!1;o&&(e.changedTouches&&(e.changedTouches.length===1?(_(e,e.changedTouches[0]),n.preventMouse=!0):o=!1),o&&(H(e,u),e.changedTouches?this._end(e,t,n,r,s):e.type.indexOf("mouse")!==-1&&!a||e._event.type.indexOf("mouse")!==-1?this._end(e,t,n,r,s):e.type.indexOf("mouse")!==-1&&a?n.preventMouse=!1:e.type.indexOf("MSPointer")!==-1&&this._end(e,t,n,r,s)))},_end:function(e,t,n,r,i){e.type=a,i&&(e.gesture={deltaX:e.pageX-i.pageX,deltaY:e.pageY-i.pageY,dirX:e.pageX-i.pageX<0?"left":"right",dirY:e.pageY-i.pageY<0?"up":"down"}),r.fire(e),t.clearData(m),t.clearData(g)},PREVENT_DEFAULT:!1})},"@VERSION@",{requires:["node-base","event-touch","event-synthetic"]});
